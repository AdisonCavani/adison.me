---
import BaseLayout from "@layouts/Base.astro";
import PageSEO from "@components/SEO/Page.astro";
import BlogLayout from "@layouts/Blog.astro";
import { GetBlogTagData, GetTagsData } from "@lib/Queries";

const { slug } = Astro.params;
const filteredPosts = await GetBlogTagData(slug! as string);

export async function getStaticPaths() {
  const tags = await GetTagsData();

  return tags.map(({ slug }) => {
    return {
      params: {
        slug: slug,
      },
    };
  });
}
---

<BaseLayout>
  <PageSEO
    slot="seo"
    title="Blog"
    description="Articles about programming, new technologies, frameworks ect."
  />

  <BlogLayout currentTag={slug as string} posts={filteredPosts} />
</BaseLayout>
